!function(e){"use strict";var i=e.parseJSON(justsliderConfig),t=function(){e(".jslider-slides-list").sortable({items:".jslider-slide",forcePlaceholderSize:!0,update:function(){n()}}).disableSelection(),e(".jslider-sliders-remove").on("click",function(){e(this).closest(".jslider-slide").remove(),n()}),e(".jslider-sliders-add").on("click",function(){var t=e(i.template).appendTo(e(".jslider-slides-list"));s(t),n()}),e(".jslider-slide").each(function(i,t){s(e(t))}),e(".jslider-slider-parameter").on("change",function(){n()})},n=function(){var i={};i.transitionType=e(".jslider-transition-type").val(),i.autoplay=e(".jslider-autoplay").val(),i.time=e(".jslider-transition-time").val(),i.height=e(".jslider-height").val(),i.slides={},e(".jslider-slides-list .jslider-slide").each(function(t,n){var s={};s.content=e("textarea",n).val(),s.content=encodeURIComponent(s.content),s.image=e(".just-slider-image-id",n).val(),i.slides[t]=s}),i=JSON.stringify(i),e("#just-slider-settings").val(i)},s=function(i){e(".jslider-sliders-remove",i).on("click",function(){i.remove()}),e("textarea, input",i).on("input change",function(){n()}),l(e(".just-slider-image-upload",i))},l=function(e){var i=e.find(".just-slider-image"),t=e.find(".just-slider-add-image"),s=e.find(".just-slider-delete-image"),l=e.find(".just-slider-image-id");l.val().length>0?(t.hide(),s.show()):(t.show(),s.hide()),t.on("click",function(e){e.preventDefault(),r(function(e){var r=e.sizes.thumbnail;r&&i.html('<img src="'+r.url+'" width="'+r.width+'" height="'+r.height+'" />'),l.val(e.id),t.hide(),s.show(),n()})}),s.on("click",function(e){e.preventDefault(),confirm("Are you sure?")&&(i.empty(),l.val(""),t.show(),s.hide(),n())})},r=function(e){var i=wp.media({title:"Select an image",multiple:!1,library:{type:"image"},button:{text:"Insert"}});i.on("select",function(){var t=i.state().get("selection").first().toJSON();e(t)}),i.open()};e(document).ready(function(){t(),n()})}(jQuery);