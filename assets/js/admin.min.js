!function(e){"use strict";var i=e.parseJSON(justsliderConfig),t=function(){e(".jslider-slides-list").sortable({items:".jslider-slide",forcePlaceholderSize:!0,update:function(){s()}}).disableSelection(),e(".jslider-sliders-remove").on("click",function(){e(this).closest(".jslider-slide").remove(),s()}),e(".jslider-sliders-add").on("click",function(){var t=e(i.template).appendTo(e(".jslider-slides-list"));l(t),s()}),e(".jslider-slide").each(function(i,t){l(e(t))}),e(".jslider-slider-parameter").on("change",function(){s()})},s=function(){var i={};i.transitionType=e(".jslider-transition-type").val(),i.autoplay=e(".jslider-autoplay").val(),i.scaling=e(".jslider-scaling").val(),"crop"===i.scaling?e(".jslider-height").closest("label").css("visibility","visible"):e(".jslider-height").closest("label").css("visibility","hidden"),i.time=e(".jslider-transition-time").val(),i.height=e(".jslider-height").val(),i.slides={},e(".jslider-slides-list .jslider-slide").each(function(t,s){var l={};l.content=e("textarea",s).val(),l.content=encodeURIComponent(l.content),l.image=e(".just-slider-image-id",s).val(),i.slides[t]=l}),i=JSON.stringify(i),e("#just-slider-settings").val(i)},l=function(i){e(".jslider-sliders-remove",i).on("click",function(){i.remove()}),e("textarea, input",i).on("input change",function(){s()}),n(e(".just-slider-image-upload",i))},n=function(e){var i=e.find(".just-slider-image"),t=e.find(".just-slider-add-image"),l=e.find(".just-slider-delete-image"),n=e.find(".just-slider-image-id");n.val().length>0?(t.hide(),l.show()):(t.show(),l.hide()),t.on("click",function(e){e.preventDefault(),r(function(e){var r=e.sizes.thumbnail;r&&i.html('<img src="'+r.url+'" width="'+r.width+'" height="'+r.height+'" />'),n.val(e.id),t.hide(),l.show(),s()})}),l.on("click",function(e){e.preventDefault(),confirm("Are you sure?")&&(i.empty(),n.val(""),t.show(),l.hide(),s())})},r=function(e){var i=wp.media({title:"Select an image",multiple:!1,library:{type:"image"},button:{text:"Insert"}});i.on("select",function(){var t=i.state().get("selection").first().toJSON();e(t)}),i.open()};e(document).ready(function(){t(),s()})}(jQuery);